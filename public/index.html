<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/style.css" />
  <script src="http://localhost:4555/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>

<body>
  <div id="main-container">
    <div class="name-container">
      <input type="text" id="name-input" placeholder="Digite seu nome de usuÃ¡rio" autocomplete="off">
    </div>
    <ul id="messages"></ul>
    <form id="chat-form" action="">
      <div>
        <input id="message-input" autocomplete="off" /><button>Send</button>
      </div>
  </div>
  <script>
    const socket = io('http://localhost:4555');

    const form = document.querySelector('#chat-form');

    const sendMessage = (e) => {
      console.log(e.target);
      e.preventDefault();
      const chatMessage = document.querySelector('#message-input').value;
      const nickname = document.querySelector('#name-input').value;
      socket.emit('message', { chatMessage, nickname });
      document.querySelector('#message-input').value = '';
    };

    socket.on('message', (msg) => {
      const li = document.createElement('li');
      const message = document.createTextNode(msg);
      li.appendChild(message);
      document.querySelector('#messages').appendChild(li);
    });

    form.addEventListener('submit', sendMessage);

  </script>
</body>

</html>